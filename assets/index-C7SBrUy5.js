import{ar as u,F as r,al as W,as as F,at as N,U as z,O as T,ay as R,aA as B,r as c,R as w,G as f,au as m,N as b,aB as I,aC as S,$ as L,ac as O,X as C,aD as V,aE as D}from"./index-CPAKaPzh.js";import{V as Y}from"./index-CBK9vvfO.js";function P(i){const{onFilter:p,actors:v=[],initialValues:y,...g}=i,[n]=u.useForm();async function h(){const e=await n.validateFields();p(e)}function d(){n.resetFields(),p({})}const s=v.map(e=>({label:`${e.name}(${e.count}部)`,value:e.name}));return r.jsx(W,{title:r.jsxs("div",{style:{fontSize:"18px",fontWeight:600,color:"var(--color-text-primary)",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(R,{style:{color:"var(--color-gold-primary)"}}),r.jsx("span",{className:"tissue-text-gold",children:"影片过滤"})]}),...g,forceRender:!0,footer:r.jsxs(z,{children:[r.jsx(T,{onClick:d,style:{background:"var(--color-bg-spotlight)",border:"1px solid var(--color-border-primary)",color:"var(--color-text-primary)",fontWeight:500,transition:"all var(--transition-fast)"},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--color-border-gold)",e.currentTarget.style.color="var(--color-gold-light)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--color-border-primary)",e.currentTarget.style.color="var(--color-text-primary)"},children:"重 制"}),r.jsx(T,{type:"primary",onClick:h,className:"tissue-btn-gold",style:{background:"linear-gradient(135deg, var(--color-gold-primary) 0%, var(--color-gold-dark) 100%)",border:"none",color:"var(--color-bg-base)",fontWeight:600,boxShadow:"var(--shadow-sm)",transition:"all var(--transition-base)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--color-gold-light) 0%, var(--color-gold-primary) 100%)",e.currentTarget.style.boxShadow="0 0 20px rgba(212, 168, 82, 0.3), 0 4px 16px rgba(0, 0, 0, 0.4)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--color-gold-primary) 0%, var(--color-gold-dark) 100%)",e.currentTarget.style.boxShadow="var(--shadow-sm)",e.currentTarget.style.transform="translateY(0)"},children:"确 定"})]}),styles:{content:{background:"var(--color-bg-container)",border:"1px solid var(--color-border-primary)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},header:{background:"transparent",borderBottom:"1px solid var(--color-border-primary)",paddingBottom:"16px"},body:{paddingTop:"24px"}},children:r.jsxs(u,{form:n,layout:"vertical",initialValues:y,style:{padding:"8px 0"},children:[r.jsx(u.Item,{name:"title",label:r.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:500,fontSize:"14px"},children:"标题"}),children:r.jsx(F,{allowClear:!0,placeholder:"输入标题关键词...",style:{background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-primary)",color:"var(--color-text-primary)",borderRadius:"var(--radius-md)",transition:"all var(--transition-fast)"},onFocus:e=>{e.currentTarget.style.borderColor="var(--color-border-gold)",e.currentTarget.style.boxShadow="0 0 0 2px rgba(212, 168, 82, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="var(--color-border-primary)",e.currentTarget.style.boxShadow="none"}})}),r.jsx(u.Item,{name:"actors",label:r.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:500,fontSize:"14px"},children:"演员"}),children:r.jsx(N.Group,{options:s.map(e=>({...e,style:{display:"inline-flex",alignItems:"center",padding:"8px 12px",margin:"4px",background:"var(--color-bg-elevated)",border:"1px solid var(--color-border-primary)",borderRadius:"var(--radius-sm)",color:"var(--color-text-primary)",transition:"all var(--transition-fast)",cursor:"pointer",userSelect:"none"}})),style:{display:"flex",flexWrap:"wrap",gap:"0",maxHeight:"320px",overflowY:"auto",padding:"8px",background:"var(--color-bg-base)",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border-secondary)"}})})]})})}function H(){var k;const{data:i=[],loading:p,run:v,refresh:y}=B(D),[g,n]=c.useState(),[h,d]=c.useState(!1),[s,e]=c.useState({}),E=c.useMemo(()=>{const o=[];return i.forEach(l=>{l.actors.forEach(a=>{const t=o.find(M=>M.name==a.name);t?t.count=t.count+1:(a.count=1,o.push(a))})}),o},[i]),j=c.useMemo(()=>i.filter(o=>{var l;return s.title&&!o.title.toUpperCase().includes(s.title.toUpperCase())?!1:(l=s.actors)!=null&&l.length?o.actors.map(a=>a.name).filter(a=>{var t;return(t=s.actors)==null?void 0:t.includes(a)}).length>0:!0}),[s,i]),x=!!s.title||!!((k=s.actors)!=null&&k.length);return p?r.jsx(w,{gutter:[16,16],children:[...Array(8)].map((o,l)=>r.jsx(f,{span:24,md:12,lg:6,className:"tissue-animate-in",style:{animationDelay:`${l*50}ms`},children:r.jsxs(m,{style:{background:"var(--color-bg-container)",border:"1px solid var(--color-border-primary)",borderRadius:"var(--radius-lg)"},children:[r.jsx("div",{className:"tissue-skeleton",style:{width:"100%",height:"240px",marginBottom:"16px",borderRadius:"var(--radius-md)"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"100%",height:"20px",marginBottom:"12px"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"60%",height:"16px",marginBottom:"8px"}}),r.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"12px"},children:[r.jsx("div",{className:"tissue-skeleton",style:{width:"50px",height:"24px",borderRadius:"var(--radius-sm)"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"50px",height:"24px",borderRadius:"var(--radius-sm)"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"60px",height:"24px",borderRadius:"var(--radius-sm)"}})]})]})},l))}):r.jsxs(w,{gutter:[16,16],children:[j.length>0?j.map((o,l)=>r.jsx(f,{span:24,md:12,lg:6,className:"tissue-animate-in",style:{animationDelay:`${l*50}ms`},children:r.jsxs(m,{hoverable:!0,size:"small",cover:r.jsx("div",{className:"tissue-cover",style:{height:"240px"},children:r.jsx(I,{src:o.cover})}),onClick:()=>n(o.path),style:{background:"var(--color-bg-container)",border:"1px solid var(--color-border-primary)",borderRadius:"var(--radius-lg)",overflow:"hidden",transition:"all var(--transition-base)",cursor:"pointer",position:"relative"},className:"tissue-glow-border",onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-6px)",a.currentTarget.style.boxShadow="0 0 24px rgba(212, 168, 82, 0.2), 0 8px 32px rgba(0, 0, 0, 0.5)",a.currentTarget.style.borderColor="var(--color-border-gold)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="",a.currentTarget.style.borderColor="var(--color-border-primary)"},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, transparent 50%)",pointerEvents:"none",zIndex:1}}),r.jsx(m.Meta,{title:r.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"1.5",minHeight:"3em",fontSize:"14px",fontWeight:600,color:"var(--color-text-primary)",transition:"color var(--transition-fast)"},onMouseEnter:a=>{a.currentTarget.style.color="var(--color-gold-light)"},onMouseLeave:a=>{a.currentTarget.style.color="var(--color-text-primary)"},children:o.title}),description:r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"10px"},children:[o.is_zh&&r.jsx(b,{variant:"borderless",style:{background:"rgba(24, 144, 255, 0.15)",color:"#4ea8ff",border:"1px solid rgba(24, 144, 255, 0.3)",borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0},children:"中文"}),o.is_uncensored&&r.jsx(b,{variant:"borderless",style:{background:"rgba(82, 196, 26, 0.15)",color:"#73d13d",border:"1px solid rgba(82, 196, 26, 0.3)",borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0},children:"无码"}),o.actors.slice(0,3).map(a=>r.jsx(b,{variant:"borderless",style:{background:"var(--color-gold-glow)",color:"var(--color-gold-primary)",border:"1px solid var(--color-border-gold)",borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0,transition:"all var(--transition-fast)"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(212, 168, 82, 0.25)",t.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:t=>{t.currentTarget.style.background="var(--color-gold-glow)",t.currentTarget.style.transform="translateY(0)"},children:a.name},a.name)),o.actors.length>3&&r.jsxs(b,{variant:"borderless",style:{background:"var(--color-bg-spotlight)",color:"var(--color-text-tertiary)",border:"1px solid var(--color-border-primary)",borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0},children:["+",o.actors.length-3]})]})})]})},o.path)):r.jsx(f,{span:24,children:r.jsx(m,{title:r.jsx("span",{style:{color:"var(--color-text-primary)",fontSize:"16px",fontWeight:600},children:"视频"}),style:{background:"var(--color-bg-container)",border:"1px solid var(--color-border-primary)",borderRadius:"var(--radius-lg)"},children:r.jsx(S,{image:S.PRESENTED_IMAGE_SIMPLE,description:r.jsxs("div",{style:{padding:"24px 0"},children:[r.jsx("div",{style:{fontSize:"16px",marginBottom:"12px",color:"var(--color-text-primary)",fontWeight:500},children:x?"没有找到符合条件的视频":"暂无视频"}),r.jsx("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:x?"请尝试调整筛选条件":r.jsxs("span",{children:["请先"," ",r.jsx(L,{to:"/setting",hash:"video",style:{fontWeight:500,color:"var(--color-gold-primary)",textDecoration:"none",transition:"color var(--transition-fast)"},onMouseEnter:o=>{o.currentTarget.style.color="var(--color-gold-light)"},onMouseLeave:o=>{o.currentTarget.style.color="var(--color-gold-primary)"},children:"配置视频路径"})," ","以添加视频"]})})]})})})}),r.jsx(Y,{title:"编辑",mode:"video",width:1100,path:g,open:!!g,onCancel:()=>n(void 0),onOk:()=>{n(void 0),y()}}),r.jsx(P,{open:h,actors:E,initialValues:s,onCancel:()=>d(!1),onFilter:o=>{e(o),d(!1)}}),r.jsx(r.Fragment,{children:O.createPortal(r.jsxs(r.Fragment,{children:[r.jsx(C,{icon:r.jsx(V,{}),onClick:()=>v(!0),style:{background:"var(--color-bg-spotlight)",border:"1px solid var(--color-border-primary)"}}),r.jsx(C,{icon:r.jsx(R,{}),type:x?"primary":"default",onClick:()=>d(!0),style:{...x?{background:"linear-gradient(135deg, var(--color-gold-primary) 0%, var(--color-gold-dark) 100%)",boxShadow:"var(--shadow-gold)"}:{background:"var(--color-bg-spotlight)",border:"1px solid var(--color-border-primary)"}}})]}),document.getElementsByClassName("index-float-button-group")[0])})]})}export{H as component};
