import{aM as h,a6 as m,aB as f,r as n,F as e,av as j,J as o,N as g,aU as y,aD as k,Z as I,at as w}from"./index-BQ4m4hxf.js";import{u as S}from"./index-B3SzWqYz.js";import{I as v}from"./index-DzFtCeiU.js";import{V as D}from"./index-B-e-Ja3B.js";import{R as L}from"./FolderViewOutlined-BnarYYnA.js";async function z(){return(await h.request({url:"/file/"})).data.data}const{useToken:C}=m;function T(){const{token:r}=C(),{data:i=[],loading:u,refresh:p}=f(z),[c,a]=n.useState(),[l,x]=n.useState(),s=S(l,{wait:1e3}),d=n.useMemo(()=>i.filter(t=>!s||t.name.indexOf(s)!=-1||t.path.indexOf(s)!=-1),[i,s]);return e.jsxs(j,{title:"文件列表",loading:u,extra:e.jsx(w.Search,{value:l,onChange:t=>x(t.target.value),placeholder:"搜索"}),children:[d.length>0?e.jsx(o,{itemLayout:"horizontal",dataSource:d,renderItem:(t,R)=>e.jsx(o.Item,{actions:[e.jsx(y,{title:"整理",children:e.jsx(v,{onClick:()=>a(`${t.path}/${t.name}`),children:e.jsx(L,{style:{fontSize:r.sizeLG}})})})],children:e.jsx(o.Item.Meta,{title:e.jsxs("span",{children:[t.name,e.jsx(g,{style:{marginLeft:5},color:"success",children:t.size})]}),description:t.path})})}):e.jsx(k,{description:e.jsxs("span",{children:["无文件，",e.jsx(I,{to:"/setting/file",children:"配置文件"})]})}),e.jsx(D,{title:"文件整理",mode:"file",width:1100,path:c,open:!!c,onCancel:()=>a(void 0),onOk:()=>{a(void 0),p()}})]})}export{T as component};
