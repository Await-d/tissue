import{aK as m,az as f,r as a,D as e,at as j,ar as g,N as o,aS as y,T as S,aC as k,X as I,a4 as w}from"./index-D7_jgbed.js";import{u as C}from"./index-CtJHTMHq.js";import{I as z}from"./index-DdYAJnjh.js";import{V as D}from"./index-SMRBXPG1.js";import{R as L}from"./FolderViewOutlined-RIdv2e4R.js";async function R(){return(await m.request({url:"/file/"})).data.data}const{useToken:T}=w,K=function(){const{token:u}=T(),{data:r=[],loading:p,refresh:x}=f(R),[i,n]=a.useState(),[c,h]=a.useState(),s=C(c,{wait:1e3}),l=a.useMemo(()=>r.filter(t=>!s||t.name.indexOf(s)!=-1||t.path.indexOf(s)!=-1),[r,s]);return e.jsxs(j,{title:"文件列表",loading:p,extra:e.jsx(g.Search,{value:c,onChange:t=>h(t.target.value),placeholder:"搜索"}),children:[l.length>0?e.jsx(o,{itemLayout:"horizontal",dataSource:l,renderItem:(t,q)=>e.jsx(o.Item,{actions:[e.jsx(y,{title:"整理",children:e.jsx(z,{onClick:()=>n(`${t.path}/${t.name}`),children:e.jsx(L,{style:{fontSize:u.sizeLG}})})})],children:e.jsx(o.Item.Meta,{title:e.jsxs("span",{children:[t.name,e.jsx(S,{style:{marginLeft:5},color:"success",children:t.size})]}),description:t.path})})}):e.jsx(k,{description:e.jsxs("span",{children:["无文件，",e.jsx(I,{to:"/setting/file",children:"配置文件"})]})}),e.jsx(D,{title:"文件整理",mode:"file",width:1100,path:i,open:!!i,onCancel:()=>n(void 0),onOk:()=>{n(void 0),x()}})]})};export{K as component};
