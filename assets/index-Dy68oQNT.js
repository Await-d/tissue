import{aM as y,a8 as g,W as h,aB as f,r as o,F as e,av as j,J as n,N as b,aU as k,aD as S,a0 as I,U as P,at as C,O as v,aq as w}from"./index-BlNaxquh.js";import{u as N}from"./index-B0b0LMcp.js";import{I as $}from"./index-RWU5dgSP.js";import{V as z}from"./index-Dm6N_EBH.js";import{R}from"./FolderViewOutlined-gyLHAX_T.js";async function D(){return(await y.request({url:"/file/"})).data}const{useToken:L}=g;function M(){const{token:i}=L(),s=h(),{data:l=[],loading:x,refresh:m}=f(D),[d,r]=o.useState(),[c,u]=o.useState(),a=N(c,{wait:1e3}),p=o.useMemo(()=>l.filter(t=>!a||t.name.indexOf(a)!=-1||t.path.indexOf(a)!=-1),[l,a]);return e.jsx("div",{className:"file-page-wrapper animate-fade-in",children:e.jsxs(j,{title:e.jsx("span",{style:{color:s.textPrimary,fontSize:18,fontWeight:500},children:"文件列表"}),loading:x,className:"dark-card",style:{background:s.bgElevated,border:`1px solid ${s.borderPrimary}`,borderRadius:8},extra:e.jsxs(P.Compact,{children:[e.jsx(C,{value:c,onChange:t=>u(t.target.value),placeholder:"搜索文件名或路径",style:{background:s.bgContainer,border:`1px solid ${s.borderPrimary}`,color:s.textPrimary},className:"dark-input"}),e.jsx(v,{icon:e.jsx(w,{}),style:{background:s.bgContainer,border:`1px solid ${s.borderPrimary}`,color:s.goldPrimary}})]}),children:[p.length>0?e.jsx(n,{itemLayout:"horizontal",dataSource:p,className:"dark-file-list",renderItem:(t,q)=>e.jsx(n.Item,{className:"dark-file-item",actions:[e.jsx(k,{title:"整理",children:e.jsx($,{onClick:()=>r(`${t.path}/${t.name}`),style:{color:s.goldPrimary,transition:"all 0.3s"},className:"file-action-btn",children:e.jsx(R,{style:{fontSize:i.sizeLG}})})})],children:e.jsx(n.Item.Meta,{title:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:s.textPrimary,fontWeight:500},children:t.name}),e.jsx(b,{style:{background:s.rgba("gold",.12),border:`1px solid ${s.rgba("gold",.25)}`,color:s.goldLight,margin:0},children:t.size})]}),description:e.jsx("span",{style:{color:s.textSecondary,fontSize:13},children:t.path})})})}):e.jsx(S,{description:e.jsxs("span",{style:{color:s.textSecondary},children:["无文件，",e.jsx(I,{to:"/setting/file",style:{color:s.goldPrimary},children:"配置文件"})]}),style:{padding:"40px 0"}}),e.jsx(z,{title:"文件整理",mode:"file",width:1100,path:d,open:!!d,onCancel:()=>r(void 0),onOk:()=>{r(void 0),m()}})]})})}export{M as component};
