import{W as $,as as m,F as r,am as W,at as F,au as z,U as N,O as S,az as R,aB as B,r as g,R as P,G as j,av as b,N as h,aC as G,aD as T,a0 as L,ad as I,Y as C,aE as O,aF as V}from"./index-DT2mcGVD.js";import{V as Y}from"./index-DCa5GAMA.js";function D(e){const t=$(),{onFilter:x,actors:y=[],initialValues:f,...u}=e,[d]=m.useForm();async function v(){const o=await d.validateFields();x(o)}function c(){d.resetFields(),x({})}const i=y.map(o=>({label:`${o.name}(${o.count}部)`,value:o.name}));return r.jsx(W,{title:r.jsxs("div",{style:{fontSize:"18px",fontWeight:600,color:t.textPrimary,display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(R,{style:{color:t.goldPrimary}}),r.jsx("span",{className:"tissue-text-gold",children:"影片过滤"})]}),...u,forceRender:!0,footer:r.jsxs(N,{children:[r.jsx(S,{onClick:c,style:{background:t.bgSpotlight,border:`1px solid ${t.borderPrimary}`,color:t.textPrimary,fontWeight:500,transition:"all var(--transition-fast)"},onMouseEnter:o=>{o.currentTarget.style.borderColor=t.borderGold,o.currentTarget.style.color=t.goldLight},onMouseLeave:o=>{o.currentTarget.style.borderColor=t.borderPrimary,o.currentTarget.style.color=t.textPrimary},children:"重 制"}),r.jsx(S,{type:"primary",onClick:v,className:"tissue-btn-gold",style:{background:t.goldGradient,border:"none",color:t.bgBase,fontWeight:600,boxShadow:t.shadowSm,transition:"all var(--transition-base)"},onMouseEnter:o=>{o.currentTarget.style.background=t.goldGradientHover,o.currentTarget.style.boxShadow=`0 0 20px ${t.rgba("gold",.3)}, 0 4px 16px ${t.rgba("black",.4)}`,o.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:o=>{o.currentTarget.style.background=t.goldGradient,o.currentTarget.style.boxShadow=t.shadowSm,o.currentTarget.style.transform="translateY(0)"},children:"确 定"})]}),styles:{content:{background:t.bgContainer,border:`1px solid ${t.borderPrimary}`,boxShadow:t.shadowLg},header:{background:"transparent",borderBottom:`1px solid ${t.borderPrimary}`,paddingBottom:"16px"},body:{paddingTop:"24px"}},children:r.jsxs(m,{form:d,layout:"vertical",initialValues:f,style:{padding:"8px 0"},children:[r.jsx(m.Item,{name:"title",label:r.jsx("span",{style:{color:t.textPrimary,fontWeight:500,fontSize:"14px"},children:"标题"}),children:r.jsx(F,{allowClear:!0,placeholder:"输入标题关键词...",style:{background:t.bgElevated,border:`1px solid ${t.borderPrimary}`,color:t.textPrimary,borderRadius:"var(--radius-md)",transition:"all var(--transition-fast)"},onFocus:o=>{o.currentTarget.style.borderColor=t.borderGold,o.currentTarget.style.boxShadow=`0 0 0 2px ${t.rgba("gold",.1)}`},onBlur:o=>{o.currentTarget.style.borderColor=t.borderPrimary,o.currentTarget.style.boxShadow="none"}})}),r.jsx(m.Item,{name:"actors",label:r.jsx("span",{style:{color:t.textPrimary,fontWeight:500,fontSize:"14px"},children:"演员"}),children:r.jsx(z.Group,{options:i.map(o=>({...o,style:{display:"inline-flex",alignItems:"center",padding:"8px 12px",margin:"4px",background:t.bgElevated,border:`1px solid ${t.borderPrimary}`,borderRadius:"var(--radius-sm)",color:t.textPrimary,transition:"all var(--transition-fast)",cursor:"pointer",userSelect:"none"}})),style:{display:"flex",flexWrap:"wrap",gap:"0",maxHeight:"320px",overflowY:"auto",padding:"8px",background:t.bgBase,borderRadius:"var(--radius-md)",border:`1px solid ${t.borderSecondary}`}})})]})})}function U(){var w;const e=$(),{data:t=[],loading:x,run:y,refresh:f}=B(V),[u,d]=g.useState(),[v,c]=g.useState(!1),[i,o]=g.useState({}),E=g.useMemo(()=>{const a=[];return t.forEach(l=>{l.actors.forEach(s=>{const n=a.find(M=>M.name==s.name);n?n.count=n.count+1:(s.count=1,a.push(s))})}),a},[t]),k=g.useMemo(()=>t.filter(a=>{var l;return i.title&&!a.title.toUpperCase().includes(i.title.toUpperCase())?!1:(l=i.actors)!=null&&l.length?a.actors.map(s=>s.name).filter(s=>{var n;return(n=i.actors)==null?void 0:n.includes(s)}).length>0:!0}),[i,t]),p=!!i.title||!!((w=i.actors)!=null&&w.length);return x?r.jsx(P,{gutter:[16,16],children:[...Array(8)].map((a,l)=>r.jsx(j,{span:24,md:12,lg:6,className:"tissue-animate-in",style:{animationDelay:`${l*50}ms`},children:r.jsxs(b,{style:{background:e.bgContainer,border:`1px solid ${e.borderPrimary}`,borderRadius:"var(--radius-lg)"},children:[r.jsx("div",{className:"tissue-skeleton",style:{width:"100%",height:"240px",marginBottom:"16px",borderRadius:"var(--radius-md)"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"100%",height:"20px",marginBottom:"12px"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"60%",height:"16px",marginBottom:"8px"}}),r.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"12px"},children:[r.jsx("div",{className:"tissue-skeleton",style:{width:"50px",height:"24px",borderRadius:"var(--radius-sm)"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"50px",height:"24px",borderRadius:"var(--radius-sm)"}}),r.jsx("div",{className:"tissue-skeleton",style:{width:"60px",height:"24px",borderRadius:"var(--radius-sm)"}})]})]})},l))}):r.jsxs(P,{gutter:[16,16],children:[k.length>0?k.map((a,l)=>r.jsx(j,{span:24,md:12,lg:6,className:"tissue-animate-in",style:{animationDelay:`${l*50}ms`},children:r.jsxs(b,{hoverable:!0,size:"small",cover:r.jsx("div",{className:"tissue-cover",style:{height:"240px"},children:r.jsx(G,{src:a.cover})}),onClick:()=>d(a.path),style:{background:e.bgContainer,border:`1px solid ${e.borderPrimary}`,borderRadius:"var(--radius-lg)",overflow:"hidden",transition:"all var(--transition-base)",cursor:"pointer",position:"relative"},className:"tissue-glow-border",onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-6px)",s.currentTarget.style.boxShadow=`0 0 24px ${e.rgba("gold",.2)}, 0 8px 32px ${e.rgba("black",.5)}`,s.currentTarget.style.borderColor=e.borderGold},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="",s.currentTarget.style.borderColor=e.borderPrimary},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, transparent 50%)",pointerEvents:"none",zIndex:1}}),r.jsx(b.Meta,{title:r.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"1.5",minHeight:"3em",fontSize:"14px",fontWeight:600,color:e.textPrimary,transition:"color var(--transition-fast)"},onMouseEnter:s=>{s.currentTarget.style.color=e.goldLight},onMouseLeave:s=>{s.currentTarget.style.color=e.textPrimary},children:a.title}),description:r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"10px"},children:[a.is_zh&&r.jsx(h,{style:{background:e.rgba("white",.08),color:"#4ea8ff",border:`1px solid ${e.rgba("white",.3)}`,borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0},children:"中文"}),a.is_uncensored&&r.jsx(h,{style:{background:e.rgba("white",.08),color:"#73d13d",border:`1px solid ${e.rgba("white",.3)}`,borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0},children:"无码"}),a.actors.slice(0,3).map(s=>r.jsx(h,{style:{background:e.goldGlow,color:e.goldPrimary,border:`1px solid ${e.borderGold}`,borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0,transition:"all var(--transition-fast)"},onMouseEnter:n=>{n.currentTarget.style.background=e.rgba("gold",.25),n.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:n=>{n.currentTarget.style.background=e.goldGlow,n.currentTarget.style.transform="translateY(0)"},children:s.name},s.name)),a.actors.length>3&&r.jsxs(h,{style:{background:e.bgSpotlight,color:e.textTertiary,border:`1px solid ${e.borderPrimary}`,borderRadius:"var(--radius-sm)",fontWeight:500,fontSize:"12px",padding:"2px 10px",margin:0},children:["+",a.actors.length-3]})]})})]})},a.path)):r.jsx(j,{span:24,children:r.jsx(b,{title:r.jsx("span",{style:{color:e.textPrimary,fontSize:"16px",fontWeight:600},children:"视频"}),style:{background:e.bgContainer,border:`1px solid ${e.borderPrimary}`,borderRadius:"var(--radius-lg)"},children:r.jsx(T,{image:T.PRESENTED_IMAGE_SIMPLE,description:r.jsxs("div",{style:{padding:"24px 0"},children:[r.jsx("div",{style:{fontSize:"16px",marginBottom:"12px",color:e.textPrimary,fontWeight:500},children:p?"没有找到符合条件的视频":"暂无视频"}),r.jsx("div",{style:{fontSize:"14px",color:e.textSecondary,lineHeight:"1.6"},children:p?"请尝试调整筛选条件":r.jsxs("span",{children:["请先"," ",r.jsx(L,{to:"/setting",hash:"video",style:{fontWeight:500,color:e.goldPrimary,textDecoration:"none",transition:"color var(--transition-fast)"},onMouseEnter:a=>{a.currentTarget.style.color=e.goldLight},onMouseLeave:a=>{a.currentTarget.style.color=e.goldPrimary},children:"配置视频路径"})," ","以添加视频"]})})]})})})}),r.jsx(Y,{title:"编辑",mode:"video",width:1100,path:u,open:!!u,onCancel:()=>d(void 0),onOk:()=>{d(void 0),f()}}),r.jsx(D,{open:v,actors:E,initialValues:i,onCancel:()=>c(!1),onFilter:a=>{o(a),c(!1)}}),r.jsx(r.Fragment,{children:I.createPortal(r.jsxs(r.Fragment,{children:[r.jsx(C,{icon:r.jsx(O,{}),onClick:()=>y(!0),style:{background:e.bgSpotlight,border:`1px solid ${e.borderPrimary}`}}),r.jsx(C,{icon:r.jsx(R,{}),type:p?"primary":"default",onClick:()=>c(!0),style:{...p?{background:e.goldGradient,boxShadow:e.shadowGold}:{background:e.bgSpotlight,border:`1px solid ${e.borderPrimary}`}}})]}),document.getElementsByClassName("index-float-button-group")[0])})]})}export{U as component};
