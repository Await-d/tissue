import{ar as a,aA as l,F as e,S as N,as as t,O as x,aZ as h,b8 as w,bk as d,af as r}from"./index-DN2Bw1AB.js";import{g as v,s as _,t as k}from"./setting-BPXY2VGn.js";function S(){const[o]=a.useForm(),{loading:f}=l(v,{onSuccess:s=>{o.setFieldsValue(s.download)}}),{run:b,loading:p}=l(_,{manual:!0,onSuccess:()=>{r.success("设置成功")}}),{run:j,loading:g}=l(k,{manual:!0,onSuccess:s=>{var c,n,i,m;console.log("测试连接响应:",s),(n=(c=s.data)==null?void 0:c.data)!=null&&n.status?r.success(s.data.data.message):(i=s.data)!=null&&i.status?r.success(s.data.message):((m=s.data)==null?void 0:m.success)===!1?r.error(s.data.details||"连接失败"):r.error("连接测试失败，请检查设置")},onError:s=>{console.error("测试连接错误:",s),r.error("测试连接失败："+(s.message||"未知错误"))}});function u(s){b("download",s)}return f?e.jsx(N,{active:!0}):e.jsx("div",{className:"max-w-5xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"bg-[#1a1a1d] rounded-2xl border border-white/8 shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-white/8 bg-gradient-to-r from-[#141416] to-[#1a1a1d]",children:[e.jsxs("h2",{className:"text-2xl font-bold text-[#d4a852] flex items-center gap-3",children:[e.jsx("span",{className:"w-1.5 h-8 bg-gradient-to-b from-[#d4a852] to-[#b08d3e] rounded-full"}),"下载设置"]}),e.jsx("p",{className:"text-[#a0a0a8] text-sm mt-2 ml-6",children:"配置 qBittorrent 下载器连接和自动化选项"})]}),e.jsx("div",{className:"p-8",children:e.jsxs(a,{layout:"vertical",form:o,onFinish:u,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-[#e8c780] text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-5 bg-[#d4a852] rounded-full"}),"连接配置"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"地址(qBittorrent)"}),name:"host",children:e.jsx(t,{className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]",placeholder:"http://localhost:8080"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"用户名"}),name:"username",children:e.jsx(t,{className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]",placeholder:"admin"})}),e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"密码"}),name:"password",children:e.jsx(t.Password,{autoComplete:"new-password",className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]"})})]}),e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"连接测试"}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{loading:g,onClick:()=>j(),className:"bg-[#222226] border-white/8 text-[#d4a852] hover:border-[#d4a852] hover:text-[#e8c780] hover:bg-[#222226]/80",children:"测试连接"}),e.jsx("span",{className:"text-[#6a6a72] text-sm",children:"保存设置后再测试连接"})]})})]})]}),e.jsxs("div",{className:"mb-8 pt-8 border-t border-white/8",children:[e.jsxs("h3",{className:"text-[#e8c780] text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-5 bg-[#d4a852] rounded-full"}),"路径配置"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"转移模式"}),name:"trans_mode",tooltip:"手动或自动转移使用的转移模式",children:e.jsx(h,{className:"custom-select-dark",children:w.map(s=>e.jsx(h.Option,{children:s.name},s.value))})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"下载路径"}),name:"download_path",tooltip:"将下载路径对应到系统路径，解决下载器和系统下载路径不一致的问题",children:e.jsx(t,{className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]",placeholder:"/downloads"})}),e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"对应路径"}),name:"mapping_path",children:e.jsx(t,{className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]",placeholder:"/mnt/downloads"})})]}),e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"默认保存路径"}),name:"savepath",tooltip:"设置qBittorrent默认保存路径，留空则使用qBittorrent默认设置",children:e.jsx(t,{placeholder:"例如：/downloads/av",className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]"})})]})]}),e.jsxs("div",{className:"mb-8 pt-8 border-t border-white/8",children:[e.jsxs("h3",{className:"text-[#e8c780] text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-5 bg-[#d4a852] rounded-full"}),"自动化选项"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"自动转移(Beta)"}),name:"trans_auto",valuePropName:"checked",tooltip:"下载完成后是否自动转移到影片任务",className:"mb-0",children:e.jsx(d,{className:"custom-switch-gold"})}),e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"自动删种(Beta)"}),name:"delete_auto",valuePropName:"checked",tooltip:"整理完成后自动删除种子及数据",className:"mb-0",children:e.jsx(d,{className:"custom-switch-gold"})}),e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"完成后停止做种"}),name:"stop_seeding",valuePropName:"checked",tooltip:"种子下载完成并整理成功后自动停止做种，默认开启",className:"mb-0",children:e.jsx(d,{className:"custom-switch-gold"})})]})]}),e.jsxs("div",{className:"mb-8 pt-8 border-t border-white/8",children:[e.jsxs("h3",{className:"text-[#e8c780] text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-5 bg-[#d4a852] rounded-full"}),"高级选项"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"任务分类"}),name:"category",tooltip:"只有指定类别的任务会被识别，留空则为所有任务",children:e.jsx(t,{placeholder:"留空则为所有任务",className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]"})}),e.jsx(a.Item,{label:e.jsx("span",{className:"text-[#f0f0f2]",children:"订阅Tracker"}),name:"tracker_subscribe",tooltip:e.jsxs("span",{children:["通过Tracker订阅链接，自动为任务添加Tracker列表。",e.jsx("a",{target:"_blank",href:"https://trackerslist.com/",className:"text-[#d4a852] hover:text-[#e8c780]",children:"示例"})]}),children:e.jsx(t,{placeholder:"请输入Tracker订阅链接",className:"bg-[#141416] border-white/8 text-[#f0f0f2] hover:border-[#d4a852]/50 focus:border-[#d4a852] focus:shadow-[0_0_0_2px_rgba(212,168,82,0.1)]"})})]})]}),e.jsx("div",{className:"flex justify-center pt-6",children:e.jsx(x,{type:"primary",size:"large",loading:p,htmlType:"submit",className:"w-48 h-11 bg-gradient-to-r from-[#d4a852] to-[#b08d3e] border-0 text-[#0d0d0f] font-semibold hover:from-[#e8c780] hover:to-[#d4a852] shadow-lg hover:shadow-[#d4a852]/20",children:"保存设置"})})]})})]})})}export{S as component};
