import{as as a,aB as n,F as e,S as k,at as s,O as x,a_ as h,b6 as w,bk as o,ae as l}from"./index-BQ4m4hxf.js";import{g as f,s as v,t as y}from"./setting-h_BS8yiH.js";function B(){const[r]=a.useForm(),{loading:p}=n(f,{onSuccess:t=>{r.setFieldsValue(t.download)}}),{run:u,loading:j}=n(v,{manual:!0,onSuccess:()=>{l.success("设置成功")}}),{run:g,loading:b}=n(y,{manual:!0,onSuccess:t=>{var i,c,d,m;console.log("测试连接响应:",t),(c=(i=t.data)==null?void 0:i.data)!=null&&c.status?l.success(t.data.data.message):(d=t.data)!=null&&d.status?l.success(t.data.message):((m=t.data)==null?void 0:m.success)===!1?l.error(t.data.details||"连接失败"):l.error("连接测试失败，请检查设置")},onError:t=>{console.error("测试连接错误:",t),l.error("测试连接失败："+(t.message||"未知错误"))}});function I(t){u("download",t)}return p?e.jsx(k,{active:!0}):e.jsx("div",{className:"w-[600px] max-w-full my-0 mx-auto",children:e.jsxs(a,{layout:"vertical",form:r,onFinish:I,children:[e.jsx(a.Item,{label:"地址(qBittorrent)",name:"host",children:e.jsx(s,{})}),e.jsx(a.Item,{label:"用户名",name:"username",children:e.jsx(s,{})}),e.jsx(a.Item,{label:"密码",name:"password",children:e.jsx(s.Password,{autoComplete:"new-password"})}),e.jsxs(a.Item,{label:"测试连接",children:[e.jsx(x,{type:"default",loading:b,onClick:()=>g(),style:{marginRight:8},children:"测试连接"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"(保存设置后再测试连接)"})]}),e.jsx(a.Item,{label:"转移模式",name:"trans_mode",tooltip:"手动或自动转移使用的转移模式",children:e.jsx(h,{children:w.map(t=>e.jsx(h.Option,{children:t.name},t.value))})}),e.jsx(a.Item,{label:"下载路径",name:"download_path",tooltip:"将下载路径对应到系统路径，解决下载器和系统下载路径不一致的问题",children:e.jsx(s,{})}),e.jsx(a.Item,{label:"对应路径",name:"mapping_path",children:e.jsx(s,{})}),e.jsx(a.Item,{label:"默认保存路径",name:"savepath",tooltip:"设置qBittorrent默认保存路径，留空则使用qBittorrent默认设置",children:e.jsx(s,{placeholder:"例如：/downloads/av"})}),e.jsx(a.Item,{label:"自动转移(Beta)",name:"trans_auto",valuePropName:"checked",tooltip:"下载完成后是否自动转移到影片任务",children:e.jsx(o,{})}),e.jsx(a.Item,{label:"自动删种(Beta)",name:"delete_auto",valuePropName:"checked",tooltip:"整理完成后自动删除种子及数据",children:e.jsx(o,{})}),e.jsx(a.Item,{label:"完成后停止做种",name:"stop_seeding",valuePropName:"checked",tooltip:"种子下载完成并整理成功后自动停止做种，默认开启",children:e.jsx(o,{})}),e.jsx(a.Item,{label:"任务分类",name:"category",tooltip:"只有指定类别的任务会被识别，留空则为所有任务",children:e.jsx(s,{placeholder:"留空则为所有任务"})}),e.jsx(a.Item,{label:"订阅Tracker",name:"tracker_subscribe",tooltip:e.jsxs("span",{children:["通过Tracker订阅链接，自动为任务添加Tracker列表。",e.jsx("a",{target:"_blank",href:"https://trackerslist.com/",children:"示例"})]}),children:e.jsx(s,{placeholder:"请输入Tracker订阅链接"})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(x,{type:"primary",style:{width:150},loading:j,htmlType:"submit",children:"提交"})})]})})}export{B as component};
