import{F as e,ak as g,as as n,at as h,a_ as j,au as y,aM as d,a6 as b,aB as m,aO as v,av as i,S,ab as k,J as p,aD as I,W as C,aE as F,V as M,U as E,N as c,ae as N}from"./index-B9DTyTP1.js";function P(s){const{form:a,initValues:l,...o}=s;return e.jsx(g,{...o,title:l.name,children:e.jsxs(n,{form:a,layout:"vertical",children:[e.jsx(n.Item,{noStyle:!0,name:"id",children:e.jsx(h,{style:{display:"none"}})}),e.jsx(n.Item,{name:"alternate_host",label:"替代域名",children:e.jsx(h,{placeholder:"当域名失效或替代域名时填写"})}),e.jsx(n.Item,{name:"priority",label:"优先级",initialValue:0,children:e.jsx(j,{children:Array(101).fill(0).map((x,r)=>e.jsx(j.Option,{value:r,children:r}))})}),e.jsx(n.Item,{name:"status",label:"状态",valuePropName:"checked",children:e.jsx(y,{children:"启用"})})]})})}async function T(){return(await d.get("/site/")).data.data}function B(s){return d.put("/site/",s)}function O(){return d.post("/site/testing")}function _(){const{token:s}=b.useToken(),{data:a,refresh:l,loading:o}=m(T,{}),{modalProps:x,setOpen:r}=v({service:B,onOk:()=>{r(!1),l()}}),{run:u}=m(O,{manual:!0,onSuccess:()=>{N.success("站点刷新提交成功")}});function f(t){return e.jsx(p.Item,{children:e.jsx(M.Ribbon,{text:t.status?"启用":"停用",color:t.status?s.colorPrimary:s.colorTextDisabled,children:e.jsx(i,{size:"default",title:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{bordered:!1,children:t.priority}),e.jsx("div",{children:t.name})]}),className:"cursor-pointer",onClick:()=>r(!0,t),children:e.jsxs(E,{direction:"vertical",size:"large",children:[e.jsx("div",{style:{color:s.colorTextSecondary},children:e.jsx("span",{children:t.alternate_host||"未设置替代域名"})}),e.jsxs("div",{children:[e.jsx(c,{color:"blue",bordered:!1,children:"元数据"}),t.downloadable&&e.jsx(c,{color:"green",bordered:!1,children:"下载"})]})]})})})})}return o?e.jsx(i,{children:e.jsx(S,{active:!0})}):e.jsxs(e.Fragment,{children:[a&&a.length>0?e.jsx(p,{grid:{gutter:16,xxl:4,xl:4,lg:4,md:2,xs:1},dataSource:a,renderItem:f}):e.jsx(i,{title:"站点",children:e.jsx(I,{description:e.jsxs("div",{children:[e.jsx("div",{children:"无可用站点"}),e.jsxs("div",{children:["请检查网络连接后 ",e.jsx("a",{onClick:()=>u(),children:"刷新站点"})]})]})})}),e.jsx(P,{...x}),k.createPortal(e.jsx(e.Fragment,{children:e.jsx(C,{icon:e.jsx(F,{}),onClick:()=>u()})}),document.getElementsByClassName("index-float-button-group")[0])]})}export{_ as component};
