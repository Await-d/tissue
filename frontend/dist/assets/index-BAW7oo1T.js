import{r as w,I as pe,_ as W,b1 as P,b as ie,c as F,e as D,a as ce,K as ee,d as me,C as be,x as de,ba as ve,w as ye,p as Ce,bb as je,D as $e,v as Ie,j as Se,m as ke,k as _,bc as we,bd as ze,l as Pe,be as Re,g as Ne,bf as Oe,bg as Ae,bh as ae,bi as Me,A as ne,aL as ue,aM as Ee,a7 as Be,Z as Te,aA as te,F as e,U as L,aT as q,a_ as _e,bj as Ke,aU as Le,J,ak as De,N as oe,M as se,au as G,R as Q,G as K,H as U,b0 as Fe,bk as re,aZ as T,O as Z,V as We,aC as le,$ as He,as as Ge,ap as Ve,ay as qe,bl as Xe}from"./index-DN2Bw1AB.js";import{u as Ue}from"./index-bV0i9UMV.js";import{I as X}from"./index-DU-NLy02.js";import{V as Ze}from"./index-J1YqMbnw.js";import{R as Je}from"./FolderViewOutlined-DJs2e-pZ.js";var Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},Ye=function(n,t){return w.createElement(pe,W({},n,{ref:t,icon:Qe}))},ea=w.forwardRef(Ye),ge=P.forwardRef(function(a,n){var t=a.prefixCls,r=a.forceRender,b=a.className,x=a.style,v=a.children,p=a.isActive,h=a.role,m=a.classNames,R=a.styles,u=P.useState(p||r),S=ie(u,2),l=S[0],j=S[1];return P.useEffect(function(){(r||p)&&j(!0)},[r,p]),l?P.createElement("div",{ref:n,className:F("".concat(t,"-content"),D(D({},"".concat(t,"-content-active"),p),"".concat(t,"-content-inactive"),!p),b),style:x,role:h},P.createElement("div",{className:F("".concat(t,"-content-box"),m==null?void 0:m.body),style:R==null?void 0:R.body},v)):null});ge.displayName="PanelContent";var aa=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],fe=P.forwardRef(function(a,n){var t=a.showArrow,r=t===void 0?!0:t,b=a.headerClass,x=a.isActive,v=a.onItemClick,p=a.forceRender,h=a.className,m=a.classNames,R=m===void 0?{}:m,u=a.styles,S=u===void 0?{}:u,l=a.prefixCls,j=a.collapsible,d=a.accordion,k=a.panelKey,I=a.extra,z=a.header,g=a.expandIcon,i=a.openMotion,N=a.destroyInactivePanel,$=a.children,E=ce(a,aa),O=j==="disabled",A=I!=null&&typeof I!="boolean",M=D(D(D({onClick:function(){v==null||v(k)},onKeyDown:function(B){(B.key==="Enter"||B.keyCode===ee.ENTER||B.which===ee.ENTER)&&(v==null||v(k))},role:d?"tab":"button"},"aria-expanded",x),"aria-disabled",O),"tabIndex",O?-1:0),s=typeof g=="function"?g(a):P.createElement("i",{className:"arrow"}),o=s&&P.createElement("div",W({className:"".concat(l,"-expand-icon")},["header","icon"].includes(j)?M:{}),s),y=F("".concat(l,"-item"),D(D({},"".concat(l,"-item-active"),x),"".concat(l,"-item-disabled"),O),h),f=F(b,"".concat(l,"-header"),D({},"".concat(l,"-collapsible-").concat(j),!!j),R.header),C=me({className:f,style:S.header},["header","icon"].includes(j)?{}:M);return P.createElement("div",W({},E,{ref:n,className:y}),P.createElement("div",C,r&&o,P.createElement("span",W({className:"".concat(l,"-header-text")},j==="header"?M:{}),z),A&&P.createElement("div",{className:"".concat(l,"-extra")},I)),P.createElement(be,W({visible:x,leavedClassName:"".concat(l,"-content-hidden")},i,{forceRender:p,removeOnLeave:N}),function(c,B){var V=c.className,H=c.style;return P.createElement(ge,{ref:B,prefixCls:l,className:V,classNames:R,style:H,styles:S,isActive:x,forceRender:p,role:d?"tabpanel":void 0},$)}))}),na=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],ta=function(n,t){var r=t.prefixCls,b=t.accordion,x=t.collapsible,v=t.destroyInactivePanel,p=t.onItemClick,h=t.activeKey,m=t.openMotion,R=t.expandIcon;return n.map(function(u,S){var l=u.children,j=u.label,d=u.key,k=u.collapsible,I=u.onItemClick,z=u.destroyInactivePanel,g=ce(u,na),i=String(d??S),N=k??x,$=z??v,E=function(M){N!=="disabled"&&(p(M),I==null||I(M))},O=!1;return b?O=h[0]===i:O=h.indexOf(i)>-1,P.createElement(fe,W({},g,{prefixCls:r,key:i,panelKey:i,isActive:O,accordion:b,openMotion:m,expandIcon:R,header:j,collapsible:N,onItemClick:E,destroyInactivePanel:$}),l)})},oa=function(n,t,r){if(!n)return null;var b=r.prefixCls,x=r.accordion,v=r.collapsible,p=r.destroyInactivePanel,h=r.onItemClick,m=r.activeKey,R=r.openMotion,u=r.expandIcon,S=n.key||String(t),l=n.props,j=l.header,d=l.headerClass,k=l.destroyInactivePanel,I=l.collapsible,z=l.onItemClick,g=!1;x?g=m[0]===S:g=m.indexOf(S)>-1;var i=I??v,N=function(O){i!=="disabled"&&(h(O),z==null||z(O))},$={key:S,panelKey:S,header:j,headerClass:d,isActive:g,prefixCls:b,destroyInactivePanel:k??p,openMotion:R,accordion:x,children:n.props.children,onItemClick:N,expandIcon:u,collapsible:i};return typeof n.type=="string"?n:(Object.keys($).forEach(function(E){typeof $[E]>"u"&&delete $[E]}),P.cloneElement(n,$))};function sa(a,n,t){return Array.isArray(a)?ta(a,t):de(n).map(function(r,b){return oa(r,b,t)})}function ra(a){var n=a;if(!Array.isArray(n)){var t=je(n);n=t==="number"||t==="string"?[n]:[]}return n.map(function(r){return String(r)})}var la=P.forwardRef(function(a,n){var t=a.prefixCls,r=t===void 0?"rc-collapse":t,b=a.destroyInactivePanel,x=b===void 0?!1:b,v=a.style,p=a.accordion,h=a.className,m=a.children,R=a.collapsible,u=a.openMotion,S=a.expandIcon,l=a.activeKey,j=a.defaultActiveKey,d=a.onChange,k=a.items,I=F(r,h),z=ve([],{value:l,onChange:function(A){return d==null?void 0:d(A)},defaultValue:j,postState:ra}),g=ie(z,2),i=g[0],N=g[1],$=function(A){return N(function(){if(p)return i[0]===A?[]:[A];var M=i.indexOf(A),s=M>-1;return s?i.filter(function(o){return o!==A}):[].concat($e(i),[A])})};ye(!m,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var E=sa(k,m,{prefixCls:r,accordion:p,openMotion:u,expandIcon:S,collapsible:R,destroyInactivePanel:x,onItemClick:$,activeKey:i});return P.createElement("div",W({ref:n,className:I,style:v,role:p?"tablist":void 0},Ce(a,{aria:!0,data:!0})),E)});const Y=Object.assign(la,{Panel:fe});Y.Panel;const ia=w.forwardRef((a,n)=>{const{getPrefixCls:t}=w.useContext(Ie),{prefixCls:r,className:b,showArrow:x=!0}=a,v=t("collapse",r),p=F({[`${v}-no-arrow`]:!x},b);return w.createElement(Y.Panel,Object.assign({ref:n},a,{prefixCls:v,className:p}))}),ca=a=>{const{componentCls:n,contentBg:t,padding:r,headerBg:b,headerPadding:x,collapseHeaderPaddingSM:v,collapseHeaderPaddingLG:p,collapsePanelBorderRadius:h,lineWidth:m,lineType:R,colorBorder:u,colorText:S,colorTextHeading:l,colorTextDisabled:j,fontSizeLG:d,lineHeight:k,lineHeightLG:I,marginSM:z,paddingSM:g,paddingLG:i,paddingXS:N,motionDurationSlow:$,fontSizeIcon:E,contentPadding:O,fontHeight:A,fontHeightLG:M}=a,s=`${_(m)} ${R} ${u}`;return{[n]:Object.assign(Object.assign({},ze(a)),{backgroundColor:b,border:s,borderRadius:h,"&-rtl":{direction:"rtl"},[`& > ${n}-item`]:{borderBottom:s,"&:first-child":{[`
            &,
            & > ${n}-header`]:{borderRadius:`${_(h)} ${_(h)} 0 0`}},"&:last-child":{[`
            &,
            & > ${n}-header`]:{borderRadius:`0 0 ${_(h)} ${_(h)}`}},[`> ${n}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:x,color:l,lineHeight:k,cursor:"pointer",transition:`all ${$}, visibility 0s`},Pe(a)),{[`> ${n}-header-text`]:{flex:"auto"},[`${n}-expand-icon`]:{height:A,display:"flex",alignItems:"center",paddingInlineEnd:z},[`${n}-arrow`]:Object.assign(Object.assign({},Re()),{fontSize:E,transition:`transform ${$}`,svg:{transition:`transform ${$}`}}),[`${n}-header-text`]:{marginInlineEnd:"auto"}}),[`${n}-collapsible-header`]:{cursor:"default",[`${n}-header-text`]:{flex:"none",cursor:"pointer"},[`${n}-expand-icon`]:{cursor:"pointer"}},[`${n}-collapsible-icon`]:{cursor:"unset",[`${n}-expand-icon`]:{cursor:"pointer"}}},[`${n}-content`]:{color:S,backgroundColor:t,borderTop:s,[`& > ${n}-content-box`]:{padding:O},"&-hidden":{display:"none"}},"&-small":{[`> ${n}-item`]:{[`> ${n}-header`]:{padding:v,paddingInlineStart:N,[`> ${n}-expand-icon`]:{marginInlineStart:a.calc(g).sub(N).equal()}},[`> ${n}-content > ${n}-content-box`]:{padding:g}}},"&-large":{[`> ${n}-item`]:{fontSize:d,lineHeight:I,[`> ${n}-header`]:{padding:p,paddingInlineStart:r,[`> ${n}-expand-icon`]:{height:M,marginInlineStart:a.calc(i).sub(r).equal()}},[`> ${n}-content > ${n}-content-box`]:{padding:i}}},[`${n}-item:last-child`]:{borderBottom:0,[`> ${n}-content`]:{borderRadius:`0 0 ${_(h)} ${_(h)}`}},[`& ${n}-item-disabled > ${n}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:j,cursor:"not-allowed"}},[`&${n}-icon-position-end`]:{[`& > ${n}-item`]:{[`> ${n}-header`]:{[`${n}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:z}}}}})}},da=a=>{const{componentCls:n}=a,t=`> ${n}-item > ${n}-header ${n}-arrow`;return{[`${n}-rtl`]:{[t]:{transform:"rotate(180deg)"}}}},ua=a=>{const{componentCls:n,headerBg:t,borderlessContentPadding:r,borderlessContentBg:b,colorBorder:x}=a;return{[`${n}-borderless`]:{backgroundColor:t,border:0,[`> ${n}-item`]:{borderBottom:`1px solid ${x}`},[`
        > ${n}-item:last-child,
        > ${n}-item:last-child ${n}-header
      `]:{borderRadius:0},[`> ${n}-item:last-child`]:{borderBottom:0},[`> ${n}-item > ${n}-content`]:{backgroundColor:b,borderTop:0},[`> ${n}-item > ${n}-content > ${n}-content-box`]:{padding:r}}}},ga=a=>{const{componentCls:n,paddingSM:t}=a;return{[`${n}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${n}-item`]:{borderBottom:0,[`> ${n}-content`]:{backgroundColor:"transparent",border:0,[`> ${n}-content-box`]:{paddingBlock:t}}}}}},fa=a=>({headerPadding:`${a.paddingSM}px ${a.padding}px`,headerBg:a.colorFillAlter,contentPadding:`${a.padding}px 16px`,contentBg:a.colorBgContainer,borderlessContentPadding:`${a.paddingXXS}px 16px ${a.padding}px`,borderlessContentBg:"transparent"}),ha=Se("Collapse",a=>{const n=ke(a,{collapseHeaderPaddingSM:`${_(a.paddingXS)} ${_(a.paddingSM)}`,collapseHeaderPaddingLG:`${_(a.padding)} ${_(a.paddingLG)}`,collapsePanelBorderRadius:a.borderRadiusLG});return[ca(n),ua(n),ga(n),da(n),we(n)]},fa),xa=w.forwardRef((a,n)=>{const{getPrefixCls:t,direction:r,expandIcon:b,className:x,style:v}=Ne("collapse"),{prefixCls:p,className:h,rootClassName:m,style:R,bordered:u=!0,ghost:S,size:l,expandIconPosition:j="start",children:d,destroyInactivePanel:k,destroyOnHidden:I,expandIcon:z}=a,g=Oe(C=>{var c;return(c=l??C)!==null&&c!==void 0?c:"middle"}),i=t("collapse",p),N=t(),[$,E,O]=ha(i),A=w.useMemo(()=>j==="left"?"start":j==="right"?"end":j,[j]),M=z??b,s=w.useCallback((C={})=>{const c=typeof M=="function"?M(C):w.createElement(Ae,{rotate:C.isActive?r==="rtl"?-90:90:void 0,"aria-label":C.isActive?"expanded":"collapsed"});return ae(c,()=>{var B;return{className:F((B=c.props)===null||B===void 0?void 0:B.className,`${i}-arrow`)}})},[M,i,r]),o=F(`${i}-icon-position-${A}`,{[`${i}-borderless`]:!u,[`${i}-rtl`]:r==="rtl",[`${i}-ghost`]:!!S,[`${i}-${g}`]:g!=="middle"},x,h,m,E,O),y=w.useMemo(()=>Object.assign(Object.assign({},Me(N)),{motionAppear:!1,leavedClassName:`${i}-content-hidden`}),[N,i]),f=w.useMemo(()=>d?de(d).map((C,c)=>{var B,V;const H=C.props;if(H!=null&&H.disabled){const he=(B=C.key)!==null&&B!==void 0?B:String(c),xe=Object.assign(Object.assign({},ne(C.props,["disabled"])),{key:he,collapsible:(V=H.collapsible)!==null&&V!==void 0?V:"disabled"});return ae(C,xe)}return C}):null,[d]);return $(w.createElement(Y,Object.assign({ref:n,openMotion:y},ne(a,["rootClassName"]),{expandIcon:s,prefixCls:i,className:o,style:Object.assign(Object.assign({},v),R),destroyInactivePanel:I??k}),f))}),pa=Object.assign(xa,{Panel:ia});async function ma(a){return(await ue.request({url:"/download/",method:"get",params:a})).data.data}function ba(a){return ue.request({url:"/download/complete",method:"get",params:{torrent_hash:a}})}const{useToken:va}=Be;function Sa(){const{message:a,modal:n}=Ee.useApp(),{token:t}=va(),r=Te(),[b,x]=w.useState(),[v,p]=w.useState(),h=Ue(v,{wait:1e3}),[m,R]=w.useState(!0),[u,S]=w.useState(!0),[l,j]=w.useState(!1),[d,k]=w.useState({status:"all",sizeRange:[0,1e4],dateRange:null,sortBy:"date",sortOrder:"desc"}),[I,z]=w.useState({total:0,downloading:0,completed:0,failed:0,totalSize:"0 GB"}),{data:g=[],loading:i,refresh:N}=te(()=>ma({include_success:m,include_failed:u}),{refreshDeps:[m,u]}),$=w.useMemo(()=>{let s=g.filter(o=>{if(!(!h||o.name.indexOf(h)!=-1||o.files.some(c=>c.name.indexOf(h)!=-1||c.path.indexOf(h)!=-1)))return!1;const f=o.files.some(c=>c.progress>=1),C=o.files.some(c=>c.progress===0);return!(!m&&f&&!o.files.some(c=>c.progress<1)||!u&&C)});return l&&(s=s.filter(o=>{if(d.status!=="all"){const y=o.files.some(C=>C.progress>=1),f=o.files.some(C=>C.progress>0&&C.progress<1);if(d.status==="completed"&&!y||d.status==="downloading"&&!f)return!1}return!0})),s},[g,h,l,d,m,u]),{run:E}=te(ba,{manual:!0,onSuccess:()=>{a.success("标记成功"),N()}}),O=s=>{if(s){const o=new URLSearchParams(window.location.search),y=o.get("source")||"javdb",f=o.get("url")||"";r({to:`/video/${s}`,search:{source:y,url:f}})}else a.info("无法识别番号，无法跳转到详情页面")},A=s=>{r({to:"/actor",search:{actorName:s}})},M=$.map(s=>({key:s.hash,label:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsx("span",{style:{color:"#f0f0f2",fontWeight:500,fontSize:"14px"},children:s.name}),e.jsx(L,{children:(()=>{const o=s.files.length,y=s.files.filter(c=>c.progress>=1).length,f=s.files.filter(c=>c.progress>0&&c.progress<1).length,C=s.files.reduce((c,B)=>c+B.progress,0)/o;return e.jsxs(e.Fragment,{children:[e.jsxs(oe,{style:{background:y===o?"rgba(82, 196, 26, 0.2)":f>0?"rgba(212, 168, 82, 0.2)":"rgba(255, 255, 255, 0.08)",borderColor:y===o?"#52c41a":f>0?"#d4a852":"rgba(255, 255, 255, 0.08)",color:y===o?"#52c41a":f>0?"#e8c780":"#a0a0a8",fontWeight:500},children:[y,"/",o," 文件"]}),e.jsx(se,{percent:Math.round(C*100),size:"small",style:{width:80},strokeColor:y===o?"#52c41a":{"0%":"#d4a852","100%":"#e8c780"},trailColor:"rgba(255, 255, 255, 0.08)"})]})})()})]}),children:e.jsx(J,{itemLayout:"horizontal",dataSource:s.files,style:{background:"#0d0d0f",borderRadius:"8px",padding:"12px"},renderItem:(o,y)=>e.jsx(J.Item,{style:{background:"#141416",borderRadius:"8px",padding:"12px 16px",marginBottom:"8px",border:"1px solid rgba(255, 255, 255, 0.08)",transition:"all 0.3s ease"},onMouseEnter:f=>{f.currentTarget.style.borderColor="#d4a852",f.currentTarget.style.background="#1a1a1d"},onMouseLeave:f=>{f.currentTarget.style.borderColor="rgba(255, 255, 255, 0.08)",f.currentTarget.style.background="#141416"},actions:[e.jsx(q,{title:"整理",children:e.jsx(X,{onClick:()=>{x(o.path)},children:e.jsx(Je,{style:{fontSize:t.sizeLG}})})})],children:e.jsx(J.Item.Meta,{title:e.jsxs("span",{children:[o.num?e.jsx("a",{onClick:()=>O(o.num),style:{color:"#d4a852",fontWeight:500,transition:"color 0.3s ease"},onMouseEnter:f=>{f.currentTarget.style.color="#e8c780"},onMouseLeave:f=>{f.currentTarget.style.color="#d4a852"},children:o.name}):e.jsx("span",{style:{color:"#f0f0f2",fontWeight:500},children:o.name}),e.jsx(oe,{style:{marginLeft:5,background:"rgba(82, 196, 26, 0.2)",borderColor:"#52c41a",color:"#52c41a",fontWeight:500},children:o.size}),o.progress<1&&e.jsx(se,{percent:Math.round(o.progress*100),size:"small",style:{width:100,marginLeft:10,display:"inline-block"},strokeColor:{"0%":"#d4a852","100%":"#e8c780"},trailColor:"rgba(255, 255, 255, 0.08)"})]}),description:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6a6a72",fontSize:"13px",marginTop:"4px"},children:o.path}),o.actors&&o.actors.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx(De,{style:{marginRight:6,color:"#a0a0a8"}}),o.actors.map((f,C)=>e.jsxs(P.Fragment,{children:[e.jsx("a",{onClick:()=>A(f),style:{color:"#d4a852",fontWeight:500,fontSize:"13px",transition:"color 0.3s ease"},onMouseEnter:c=>{c.currentTarget.style.color="#e8c780"},onMouseLeave:c=>{c.currentTarget.style.color="#d4a852"},children:f}),C<o.actors.length-1&&e.jsx("span",{children:", "})]},f))]})]})})})}),extra:e.jsxs(L,{children:[e.jsx(q,{title:"重新开始下载",children:e.jsx(X,{onClick:()=>{a.info("重新开始下载功能开发中...")},children:e.jsx(_e,{style:{fontSize:t.sizeLG,color:"#1890ff"}})})}),e.jsx(q,{title:"暂停下载",children:e.jsx(X,{onClick:()=>{a.info("暂停下载功能开发中...")},children:e.jsx(Ke,{style:{fontSize:t.sizeLG,color:"#faad14"}})})}),e.jsx(q,{title:'标记为"整理成功"',children:e.jsx(X,{onClick:()=>{n.confirm({title:"是否确认标记为完成",onOk:()=>E(s.hash)})},children:e.jsx(ea,{style:{fontSize:t.sizeLG,color:"#52c41a"}})})}),e.jsx(q,{title:"删除任务",children:e.jsx(X,{onClick:()=>{n.confirm({title:"确认删除下载任务？",content:"此操作将删除下载任务，但不会删除已下载的文件",okText:"确认删除",okType:"danger",onOk:()=>{a.info("删除功能开发中...")}})},children:e.jsx(Le,{style:{fontSize:t.sizeLG,color:"#ff4d4f"}})})})]})}));return e.jsxs(G,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#f0f0f2",fontSize:"18px",fontWeight:600},children:"下载列表"}),e.jsxs(L,{children:[e.jsxs(Z,{icon:e.jsx(qe,{}),size:"small",onClick:()=>j(!l),style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",color:"#a0a0a8",transition:"all 0.3s ease"},children:["高级筛选 ",l?"▼":"▶"]}),e.jsx(Z,{icon:e.jsx(Xe,{}),size:"small",onClick:N,loading:i,style:{background:"linear-gradient(135deg, #d4a852 0%, #e8c780 100%)",borderColor:"#d4a852",color:"#0d0d0f",fontWeight:600,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:"刷新"})]})]}),loading:i,extra:e.jsxs(L.Compact,{children:[e.jsx(Ge,{value:v,onChange:s=>p(s.target.value),placeholder:"搜索",style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",color:"#f0f0f2"}}),e.jsx(Z,{icon:e.jsx(Ve,{}),style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",color:"#a0a0a8"}})]}),style:{background:"#141416",borderColor:"rgba(255, 255, 255, 0.08)"},styles:{header:{background:"#0d0d0f",borderBottom:"1px solid rgba(255, 255, 255, 0.08)"},body:{background:"#141416"}},children:[e.jsxs(Q,{gutter:16,style:{marginBottom:20},children:[e.jsx(K,{span:6,children:e.jsx(G,{size:"small",style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",borderRadius:"8px"},styles:{body:{padding:"16px"}},children:e.jsx(U,{title:e.jsx("span",{style:{color:"#a0a0a8",fontSize:"14px"},children:"总任务数"}),value:g.length,valueStyle:{color:"#f0f0f2",fontSize:"24px",fontWeight:600}})})}),e.jsx(K,{span:6,children:e.jsx(G,{size:"small",style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",borderRadius:"8px"},styles:{body:{padding:"16px"}},children:e.jsx(U,{title:e.jsx("span",{style:{color:"#a0a0a8",fontSize:"14px"},children:"进行中"}),value:g.reduce((s,o)=>s+o.files.filter(y=>y.progress>0&&y.progress<1).length,0),valueStyle:{color:"#4facfe",fontSize:"24px",fontWeight:600}})})}),e.jsx(K,{span:6,children:e.jsx(G,{size:"small",style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",borderRadius:"8px"},styles:{body:{padding:"16px"}},children:e.jsx(U,{title:e.jsx("span",{style:{color:"#a0a0a8",fontSize:"14px"},children:"已完成"}),value:g.reduce((s,o)=>s+o.files.filter(y=>y.progress>=1).length,0),valueStyle:{color:"#52c41a",fontSize:"24px",fontWeight:600}})})}),e.jsx(K,{span:6,children:e.jsx(G,{size:"small",style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",borderRadius:"8px"},styles:{body:{padding:"16px"}},children:e.jsx(U,{title:e.jsx("span",{style:{color:"#a0a0a8",fontSize:"14px"},children:"失败/等待"}),value:g.reduce((s,o)=>s+o.files.filter(y=>y.progress===0).length,0),valueStyle:{color:"#ff7875",fontSize:"24px",fontWeight:600}})})})]}),e.jsx(Fe,{}),e.jsx("div",{style:{marginBottom:16,padding:"12px 16px",background:"#1a1a1d",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px"},children:e.jsxs(Q,{gutter:16,children:[e.jsx(K,{children:e.jsxs(L,{children:[e.jsx("span",{style:{color:"#a0a0a8",fontSize:"14px"},children:"显示已完成:"}),e.jsx(re,{checked:m,onChange:R,size:"small",style:{background:m?"#d4a852":"rgba(255, 255, 255, 0.2)"}})]})}),e.jsx(K,{children:e.jsxs(L,{children:[e.jsx("span",{style:{color:"#a0a0a8",fontSize:"14px"},children:"显示失败:"}),e.jsx(re,{checked:u,onChange:S,size:"small",style:{background:u?"#d4a852":"rgba(255, 255, 255, 0.2)"}})]})})]})}),l&&e.jsx(G,{size:"small",style:{marginBottom:16,background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",borderRadius:"8px"},styles:{body:{padding:"16px",background:"#1a1a1d"}},children:e.jsxs(Q,{gutter:[16,8],children:[e.jsxs(K,{span:8,children:[e.jsx("div",{style:{marginBottom:8,color:"#a0a0a8",fontSize:"14px",fontWeight:500},children:"状态筛选"}),e.jsxs(T,{value:d.status,onChange:s=>k({...d,status:s}),style:{width:"100%"},dropdownStyle:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)"},children:[e.jsx(T.Option,{value:"all",children:"全部状态"}),e.jsx(T.Option,{value:"downloading",children:"下载中"}),e.jsx(T.Option,{value:"completed",children:"已完成"}),e.jsx(T.Option,{value:"failed",children:"失败/等待"})]})]}),e.jsxs(K,{span:8,children:[e.jsx("div",{style:{marginBottom:8,color:"#a0a0a8",fontSize:"14px",fontWeight:500},children:"排序方式"}),e.jsxs(T,{value:`${d.sortBy}-${d.sortOrder}`,onChange:s=>{const[o,y]=s.split("-");k({...d,sortBy:o,sortOrder:y})},style:{width:"100%"},dropdownStyle:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)"},children:[e.jsx(T.Option,{value:"date-desc",children:"添加时间 (新→旧)"}),e.jsx(T.Option,{value:"date-asc",children:"添加时间 (旧→新)"}),e.jsx(T.Option,{value:"progress-desc",children:"进度 (高→低)"}),e.jsx(T.Option,{value:"progress-asc",children:"进度 (低→高)"}),e.jsx(T.Option,{value:"size-desc",children:"大小 (大→小)"}),e.jsx(T.Option,{value:"size-asc",children:"大小 (小→大)"})]})]}),e.jsxs(K,{span:8,children:[e.jsx("div",{style:{marginBottom:8,color:"#a0a0a8",fontSize:"14px",fontWeight:500},children:"快速操作"}),e.jsx(L,{children:e.jsx(Z,{size:"small",onClick:()=>{k({status:"all",sizeRange:[0,1e4],dateRange:null,sortBy:"date",sortOrder:"desc"}),p("")},style:{background:"#1a1a1d",borderColor:"rgba(255, 255, 255, 0.08)",color:"#a0a0a8"},children:"重置筛选"})})]})]})}),$.length>0?e.jsxs(e.Fragment,{children:[$.length!==g.length&&e.jsx("div",{style:{marginBottom:16,padding:"12px 16px",background:"#1a1a1d",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:8},children:e.jsxs(L,{children:[e.jsx(We,{count:$.length,style:{background:"linear-gradient(135deg, #d4a852 0%, #e8c780 100%)",color:"#0d0d0f",fontWeight:600,boxShadow:"0 2px 8px rgba(212, 168, 82, 0.3)"}}),e.jsxs("span",{style:{color:"#a0a0a8",fontSize:"14px"},children:["筛选结果：",$.length," / ",g.length," 个任务"]})]})}),e.jsx(pa,{items:M,ghost:!0})]}):g.length>0?e.jsx(le,{description:"没有符合筛选条件的下载任务"}):e.jsx(le,{description:e.jsxs("span",{children:["无下载任务，",e.jsx(He,{to:"/setting/download",children:"配置下载"})]})}),e.jsx(Ze,{title:"下载整理",mode:"download",width:1100,path:b,open:!!b,onCancel:()=>x(void 0),onOk:()=>{x(void 0),N()}})]})}export{Sa as component};
