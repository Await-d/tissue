import{aM as n,W as g,aB as r,F as a,av as m,a7 as p,N as t,aT as h,O as y,b0 as b,ag as f}from"./index-BepdLLqU.js";async function j(){return(await n.request({url:"/schedule/",method:"get"})).data}function S(e){return n.request({url:"/schedule/fire",method:"get",params:{key:e}})}function w(){const e=g(),{data:o=[],loading:d,refresh:l}=r(j,{}),{run:i,loading:c}=r(S,{manual:!0,onSuccess:()=>{f.success("手动执行成功"),l()}}),u=[{title:"任务名称",dataIndex:"name",render:s=>a.jsx("span",{style:{color:e.textPrimary,fontWeight:500},children:s})},{title:"状态",dataIndex:"status",render:s=>s?a.jsxs(t,{style:{background:e.rgba("gold",.1),border:`1px solid ${e.borderGold}`,color:e.textGold,display:"inline-flex",alignItems:"center",gap:6},children:[a.jsx("span",{className:"status-dot running"}),"运行中"]}):a.jsxs(t,{style:{background:e.rgba("white",.1),border:`1px solid ${e.borderSecondary}`,color:e.textSecondary,display:"inline-flex",alignItems:"center",gap:6},children:[a.jsx("span",{className:"status-dot waiting"}),"等待"]})},{title:"下次执行时间",dataIndex:"next_run_time",render:s=>a.jsx("span",{style:{color:e.textSecondary,fontSize:13},children:h(s).format("lll")})},{title:"操作",dataIndex:"operations",render:(s,x)=>a.jsx(y,{type:"primary",onClick:()=>i(x.key),loading:c,icon:a.jsx(b,{}),style:{background:e.goldGradient,border:"none",boxShadow:e.shadowGold,transition:"all 0.3s"},className:"execute-btn",children:"手动执行"})}];return a.jsx("div",{className:"schedule-page-wrapper animate-fade-in",children:a.jsx(m,{title:a.jsx("span",{style:{color:e.textPrimary,fontSize:18,fontWeight:500},children:"任务调度"}),className:"dark-card",style:{background:e.bgElevated,border:`1px solid ${e.borderPrimary}`,borderRadius:8},children:a.jsx(p,{rowKey:"key",columns:u,dataSource:o,loading:d,pagination:!1,className:"dark-table",rowClassName:"dark-table-row"})})})}export{w as component};
