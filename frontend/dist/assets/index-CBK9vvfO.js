import{ar as r,r as v,F as e,al as V,U as N,bq as _,br as F,ak as A,as as p,O as h,af as D,T as I,b9 as B,aO as k,aM as L,aA as y,bs as U,bt as Y,bu as $,bv as G,bw as Z,a5 as H,R as z,G as s,bx as J,by as K,aZ as O,at as R,b1 as Q,b0 as X}from"./index-CPAKaPzh.js";const ee="_form_cf9pa_3",ae="_container_cf9pa_8",re="_coverSection_cf9pa_24",te="_posterContainer_cf9pa_40",ne="_infoSection_cf9pa_73",oe="_infoCard_cf9pa_89",ie="_ratingInput_cf9pa_214",se="_actorsContainer_cf9pa_239",le="_websiteContainer_cf9pa_260",u={form:ee,container:ae,coverSection:re,posterContainer:te,infoSection:ne,infoCard:oe,ratingInput:ie,actorsContainer:se,websiteContainer:le};function de(f){const{data:a,onOk:i,onDelete:x,onCancel:l,...g}=f,[n]=r.useForm(),[m,c]=v.useState(a==null?void 0:a.thumb);v.useEffect(()=>{f.open?(n.setFieldsValue(a),c(a==null?void 0:a.thumb)):(n.resetFields(),c(void 0))},[f.open,a]);function t(j){i==null||i(j)}const b=j=>{const C=j.target.value;c(C)},S=()=>{D.error("头像链接无效，请检查URL是否正确")},d={modal:{".ant-modal-content":{background:"linear-gradient(145deg, #141416 0%, #1a1a1d 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 24px 48px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(212, 168, 82, 0.1)",backdropFilter:"blur(20px)",borderRadius:"16px"},".ant-modal-header":{background:"transparent",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",padding:"20px 24px"},".ant-modal-title":{color:"#f0f0f2",fontSize:"18px",fontWeight:"600",letterSpacing:"0.5px"},".ant-modal-close":{color:"#a0a0a8",transition:"all 0.3s ease"},".ant-modal-close:hover":{color:"#d4a852"},".ant-modal-body":{padding:"24px"},".ant-modal-footer":{borderTop:"1px solid rgba(255, 255, 255, 0.08)",padding:"16px 24px",background:"rgba(13, 13, 15, 0.5)"}},avatarContainer:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",marginBottom:32,padding:"24px 0",background:"linear-gradient(135deg, rgba(212, 168, 82, 0.05) 0%, transparent 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.04)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},avatarWrapper:{position:"relative",transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},avatar:{border:"3px solid rgba(212, 168, 82, 0.3)",boxShadow:`
                0 0 0 4px rgba(212, 168, 82, 0.1),
                0 0 24px rgba(212, 168, 82, 0.3),
                0 8px 32px rgba(0, 0, 0, 0.6)
            `,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(135deg, #222226 0%, #1a1a1d 100%)"},avatarIcon:{color:"#d4a852"},avatarLabel:{fontSize:13,color:"#6a6a72",marginTop:12,letterSpacing:"0.3px",transition:"color 0.3s ease"},input:{background:"rgba(34, 34, 38, 0.6)",border:"1px solid rgba(255, 255, 255, 0.08)",color:"#f0f0f2",borderRadius:"8px",padding:"10px 14px",fontSize:"14px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},buttonDelete:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",color:"#ef4444",borderRadius:"8px",height:"38px",padding:"0 20px",fontWeight:"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},buttonCancel:{background:"rgba(160, 160, 168, 0.1)",border:"1px solid rgba(255, 255, 255, 0.08)",color:"#a0a0a8",borderRadius:"8px",height:"38px",padding:"0 20px",fontWeight:"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},buttonPrimary:{background:"linear-gradient(135deg, #d4a852 0%, #b08d3e 100%)",border:"none",color:"#0d0d0f",borderRadius:"8px",height:"38px",padding:"0 24px",fontWeight:"600",boxShadow:"0 4px 12px rgba(212, 168, 82, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}};return e.jsxs(V,{title:a?"修改演员信息":"添加新演员",...g,width:480,forceRender:!0,onCancel:l,styles:d.modal,footer:[a&&e.jsx(h,{onClick:x,style:d.buttonDelete,className:"actor-modal-btn-delete",children:"删除"},"delete"),e.jsx(h,{onClick:l,style:d.buttonCancel,className:"actor-modal-btn-cancel",children:"取消"},"cancel"),e.jsx(h,{type:"primary",onClick:()=>n.submit(),style:d.buttonPrimary,className:"actor-modal-btn-primary",children:"确定"},"submit")],children:[e.jsx("style",{children:`
                    .actor-modal-btn-delete:hover {
                        background: rgba(239, 68, 68, 0.2) !important;
                        border-color: rgba(239, 68, 68, 0.5) !important;
                        color: #f87171 !important;
                        transform: translateY(-1px);
                        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
                    }

                    .actor-modal-btn-cancel:hover {
                        background: rgba(160, 160, 168, 0.15) !important;
                        border-color: rgba(255, 255, 255, 0.12) !important;
                        color: #f0f0f2 !important;
                        transform: translateY(-1px);
                    }

                    .actor-modal-btn-primary:hover {
                        background: linear-gradient(135deg, #e8c780 0%, #d4a852 100%) !important;
                        transform: translateY(-2px);
                        box-shadow: 0 8px 20px rgba(212, 168, 82, 0.4) !important;
                    }

                    .actor-avatar-wrapper:hover .ant-avatar {
                        transform: scale(1.05);
                        border-color: rgba(212, 168, 82, 0.6);
                        box-shadow:
                            0 0 0 4px rgba(212, 168, 82, 0.2),
                            0 0 32px rgba(212, 168, 82, 0.5),
                            0 12px 40px rgba(0, 0, 0, 0.7);
                    }

                    .ant-input:hover,
                    .ant-input:focus {
                        background: rgba(34, 34, 38, 0.8) !important;
                        border-color: rgba(212, 168, 82, 0.4) !important;
                        box-shadow: 0 0 0 2px rgba(212, 168, 82, 0.1) !important;
                    }

                    .ant-input::placeholder {
                        color: #6a6a72;
                    }

                    .ant-form-item-label > label.ant-form-item-required:not(.ant-form-item-required-mark-optional)::before {
                        color: #d4a852 !important;
                    }

                    .ant-form-item-label > label {
                        color: #a0a0a8 !important;
                        font-size: 14px !important;
                        font-weight: 500 !important;
                        letter-spacing: 0.3px !important;
                    }

                    .ant-form-item-extra {
                        color: #6a6a72 !important;
                        font-size: 12px !important;
                    }
                `}),e.jsxs(r,{form:n,layout:"vertical",onFinish:t,initialValues:a,children:[e.jsxs(N,{direction:"vertical",style:d.avatarContainer,children:[e.jsx("div",{style:d.avatarWrapper,className:"actor-avatar-wrapper",children:e.jsx(_,{size:96,icon:e.jsx(A,{style:d.avatarIcon}),src:m&&F(m),onError:()=>(S(),!0),style:d.avatar})}),e.jsx("div",{style:d.avatarLabel,children:m?"预览头像":"暂无头像"})]}),e.jsx(r.Item,{name:"name",label:"演员姓名",rules:[{required:!0,message:"请输入演员姓名"}],children:e.jsx(p,{placeholder:"请输入演员姓名",style:d.input})}),e.jsx(r.Item,{name:"thumb",label:"头像链接",extra:"输入完整的图片URL或相对路径",children:e.jsx(p,{placeholder:"请输入头像链接",onChange:b,style:d.input})})]})]})}function ce(f){const{value:a,onChange:i}=f,[x,l]=v.useState(void 0),[g,n]=v.useState(void 0);function m(t){if(x==="add"){if(a!=null&&a.some(b=>b.name===t.name))return D.error("该演员已存在");i==null||i([...a||[],t])}else x=="edit"&&(a[g]=t,i==null||i(a&&[...a]));l(void 0),n(void 0)}function c(){i==null||i(a==null?void 0:a.filter((t,b)=>b!=g)),l(void 0),n(void 0)}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(I.Title,{level:5,style:{marginBottom:12,color:"#f0f0f2",fontSize:14,fontWeight:600,letterSpacing:"0.5px"},children:"演员信息"}),a&&a.length>0?e.jsx(N,{direction:"vertical",style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:[a.map((t,b)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[e.jsx(_,{style:{cursor:"pointer",border:"2px solid rgba(212, 168, 82, 0.5)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},size:64,src:(t==null?void 0:t.thumb)&&F(t.thumb),onClick:()=>{l("edit"),n(b)}}),e.jsx(I.Text,{style:{marginTop:8,maxWidth:64,textAlign:"center",fontSize:12,color:"#f0f0f2",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)",fontWeight:500},ellipsis:{tooltip:t==null?void 0:t.name},children:t==null?void 0:t.name}),e.jsx(h,{size:"small",type:"text",icon:e.jsx(B,{}),style:{position:"absolute",top:-8,right:-8,background:"linear-gradient(135deg, #b08d3e 0%, #d4a852 100%)",borderRadius:"50%",border:"none",padding:0,height:24,width:24,display:"flex",justifyContent:"center",alignItems:"center",color:"#0d0d0f",boxShadow:"0 2px 8px rgba(212, 168, 82, 0.4)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)"},onClick:()=>{l("edit"),n(b)}})]},t.name)),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(_,{style:{cursor:"pointer",backgroundColor:"rgba(26, 26, 29, 0.6)",border:"2px dashed rgba(212, 168, 82, 0.3)",display:"flex",justifyContent:"center",alignItems:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",color:"#d4a852",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},size:64,icon:e.jsx(k,{}),onClick:()=>{l("add"),n(void 0)}}),e.jsx(I.Text,{style:{marginTop:8,fontSize:12,color:"#a0a0a8",fontWeight:500},children:"添加演员"})]})]})}):e.jsx(h,{icon:e.jsx(k,{}),onClick:()=>{l("add"),n(void 0)},children:"添加演员"})]}),e.jsx(de,{data:g!=null&&a&&a[g],open:!!x,onOk:m,onCancel:()=>l(void 0),onDelete:c})]})}function xe(f){const{message:a,modal:i}=L.useApp(),{path:x,mode:l,transMode:g,onOk:n,...m}=f,[c]=r.useForm(),{run:t,loading:b}=y(q,{manual:!0,onSuccess:o=>{c.setFieldsValue(o)}}),{run:S,loading:d}=y(U,{manual:!0,onSuccess:o=>{delete o.data.data.is_zh,delete o.data.data.is_uncensored,c.setFieldsValue(o.data.data),a.success("刮削成功")}}),{run:j,loading:C}=y(Y,{manual:!0,onSuccess:o=>{a.success("保存成功"),n==null||n(o.request.data)}}),{run:T,loading:W}=y($,{manual:!0,onSuccess:o=>{a.success("删除成功"),n==null||n(o.request.data)}});async function q(o){let w=await G(o);return w.num||(w=await Z(o)),w}function E(){const o=c.getFieldValue("num");return o?S(o):a.error("请输入番号")}function M(o){return o.path=x,j(o,l,g)}function P(){i.confirm({title:"是否确认删除",onOk:()=>{T(x)}})}return v.useEffect(()=>{m.open&&x?t(x):c.resetFields()},[m.open]),e.jsx(V,{...m,forceRender:!0,width:1200,className:u.container,footer:[l==="video"&&e.jsxs(Q.Fragment,{children:[e.jsx(h,{onClick:P,danger:!0,loading:W,children:"删除"}),e.jsx(X,{type:"vertical"})]},"delete"),e.jsx(h,{onClick:E,loading:d,children:"刮削"},"scrape"),e.jsx(h,{type:"primary",loading:C,onClick:()=>c.submit(),children:"确定"},"save")],children:e.jsx(H,{spinning:b,children:e.jsx(r,{className:u.form,form:c,layout:"vertical",onFinish:M,children:e.jsxs(z,{gutter:[30,15],children:[e.jsxs(s,{span:24,md:10,lg:10,className:u.coverSection,children:[e.jsx("div",{className:u.posterContainer,children:e.jsx(r.Item,{noStyle:!0,name:"cover",children:e.jsx(J,{})})}),e.jsx("br",{}),e.jsx("div",{className:u.actorsContainer,children:e.jsx(r.Item,{label:"演员",name:"actors",children:e.jsx(ce,{})})}),e.jsx("br",{}),e.jsx("div",{className:u.websiteContainer,children:e.jsx(r.Item,{label:"网站",name:"website",children:e.jsx(K,{})})})]}),e.jsx(s,{span:24,md:14,lg:14,className:u.infoSection,children:e.jsx("div",{className:u.infoCard,children:e.jsxs(z,{gutter:[15,15],children:[e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"num",label:"番号",rules:[{required:!0,message:"请输入番号"}],children:e.jsx(p,{})})}),e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"premiered",label:"发行时间",children:e.jsx(p,{})})}),e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"rating",label:"评分",children:e.jsx("div",{className:u.ratingInput,children:e.jsx(p,{})})})}),e.jsx(s,{span:24,children:e.jsx(r.Item,{name:"title",label:"标题",children:e.jsx(p,{})})}),e.jsx(s,{span:24,children:e.jsx(r.Item,{name:"outline",label:"大纲",children:e.jsx(p.TextArea,{rows:4})})}),e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"studio",label:"制造商",children:e.jsx(p,{})})}),e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"publisher",label:"发行商",children:e.jsx(p,{})})}),e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"director",label:"导演",children:e.jsx(p,{})})}),e.jsx(s,{span:24,children:e.jsx(r.Item,{name:"tags",label:"类别",children:e.jsx(O,{mode:"tags"})})}),e.jsx(s,{span:12,children:e.jsx(r.Item,{name:"series",label:"系列",children:e.jsx(p,{})})}),e.jsx(s,{span:12,children:e.jsx(r.Item,{name:"runtime",label:"时长(分钟)",children:e.jsx(p,{})})}),e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"is_zh",label:"是否中文",valuePropName:"checked",initialValue:!1,children:e.jsx(R,{})})}),e.jsx(s,{span:8,children:e.jsx(r.Item,{name:"is_uncensored",label:"是否无码",valuePropName:"checked",initialValue:!1,children:e.jsx(R,{})})})]})})})]})})})})}export{xe as V};
