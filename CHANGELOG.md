# Tissue-Plus 更新日志

## [v0.1.3] - 2025-07-12

### ✨ 新增功能
- **智能下载过滤系统** - 全新的种子文件过滤功能
  - 🎯 **磁力链接解析**: 支持解析磁力链接基本信息 (Hash, 名称, 大小)
  - 🧠 **智能文件识别**: 自动识别视频、字幕、样本文件等类型
  - 📏 **文件大小过滤**: 可设置最小/最大文件大小限制
  - 🎭 **样本文件过滤**: 智能识别并跳过sample、preview等无用文件
  - 🎬 **媒体文件模式**: 新增专门针对视频+字幕的过滤模式
  - 📄 **字幕控制**: 可单独控制是否包含字幕文件
  - 🔧 **实时测试**: 支持测试磁力链接的过滤效果
  - 🚀 **自动生效**: 新种子自动应用过滤规则
  - 🗄️ **自动迁移**: 程序启动时自动创建数据库表和字段

### 🛠️ 技术改进
- **数据库层**
  - 新增 `download_filter_settings` 表存储过滤配置
  - 自动数据库迁移系统，无需手动SQL操作
  - 新增 `media_files_only` 和 `include_subtitles` 字段

- **后端服务**
  - 新增 `TorrentParser` 种子文件解析器
  - 新增 `DownloadFilterService` 过滤业务服务
  - 扩展 qBittorrent 集成，支持文件优先级设置
  - 完整的 RESTful API 接口 (`/api/download-filter/*`)

- **前端界面**
  - 新增下载过滤设置页面 (`/setting/download-filter`)
  - TypeScript 类型安全的实现
  - 实时磁力链接测试功能
  - 响应式表单设计和智能提示

### 🔧 API 接口
- `GET /api/download-filter/settings` - 获取过滤设置
- `POST /api/download-filter/settings` - 保存过滤设置
- `POST /api/download-filter/test-magnet` - 测试磁力链接过滤
- `POST /api/download-filter/filter-torrent` - 对已存在种子应用过滤
- `GET /api/download-filter/statistics` - 获取过滤统计信息

### 📋 使用场景
- **精确过滤**: 只下载大于300MB的主要视频文件
- **媒体收集**: 保留视频文件和字幕文件，过滤其他类型
- **带宽节省**: 智能跳过样本文件和宣传内容
- **存储优化**: 根据文件大小自动筛选内容

### 🎉 功能亮点
- **零配置**: 程序启动自动初始化，无需用户干预
- **智能化**: 基于文件名和大小的多维度智能分析
- **可视化**: 直观的设置界面和实时测试反馈
- **兼容性**: 与现有下载系统完美集成，无破坏性更改

---

## [v0.1.2] - 2025-07-10

### 🐛 修复问题
- 修复智能下载重试功能和优化手机端界面
- 修复演员订阅任务中的NameError
- 修复演员订阅下载记录问题
- 修复演员订阅字段兼容性问题

### ⚡ 性能优化
- 优化演员作品列表获取性能
- 增强演员订阅筛选逻辑的调试日志
- 优化智能下载规则获取视频逻辑

### 🔧 技术改进
- 添加专用生产环境数据库修复脚本
- 添加生产环境数据库修复工具
- 修复API中status变量名冲突导致的生产环境错误

---

## [v0.1.1] - 2025-07-10

### 🎯 初始版本功能
- 基础的JAV元数据刮削功能
- 演员订阅系统
- 智能下载规则
- Web管理界面
- qBittorrent集成

### 📝 说明
- 基于 chris-2s/tissue 项目深度改进
- 提供完整的媒体库管理解决方案
- 支持 Jellyfin、Emby、Kodi 等媒体服务器集成